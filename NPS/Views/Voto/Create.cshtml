@model NPS.Models.Voto
@{
    Layout = null;
}
<!DOCTYPE html>
<html class="bg-light">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar Voto</title>
    @Styles.Render("~/Content/css")
    <link href="~/Content/form-basic.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/modernizr")
</head>
<body class="container body-content bg-light">

    @using (Html.BeginForm("Create", "Voto", FormMethod.Post, new { @class = "form-basic " }))
    {
        @Html.AntiForgeryToken()

        <div class="form-row">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>

        <div class="form-title-row">
            <h1>Novo Voto</h1>
        </div>
        <div onmouseout="CRateSelected()" class=" form-row text-center justify-content-center">
            <p class="fa-2x">Em uma escala de 1 a 10, o quanto você indicaria o serviço a um amigo ou colega?</p>

            <h5>0</h5><span id="span1" onmouseout="CRateOut(1)" onmouseover="CRateOver(1)" onclick="CRateClick(1)" class="fa fa-star-o fa-3x "></span>
            <span id="span2" onmouseout="CRateOut(2)" onmouseover="CRateOver(2)" onclick="CRateClick(2)" class="fa fa-star-o fa-3x"></span>
            <span id="span3" onmouseout="CRateOut(3)" onmouseover="CRateOver(3)" onclick="CRateClick(3)" class="fa fa-star-o fa-3x"></span>
            <span id="span4" onmouseout="CRateOut(4)" onmouseover="CRateOver(4)" onclick="CRateClick(4)" class="fa fa-star-o fa-3x"></span>
            <span id="span5" onmouseout="CRateOut(5)" onmouseover="CRateOver(5)" onclick="CRateClick(5)" class="fa fa-star-o fa-3x"></span>
            <span id="span6" onmouseout="CRateOut(6)" onmouseover="CRateOver(6)" onclick="CRateClick(6)" class="fa fa-star-o fa-3x"></span>
            <span id="span7" onmouseout="CRateOut(7)" onmouseover="CRateOver(7)" onclick="CRateClick(7)" class="fa fa-star-o fa-3x"></span>
            <span id="span8" onmouseout="CRateOut(8)" onmouseover="CRateOver(8)" onclick="CRateClick(8)" class="fa fa-star-o fa-3x"></span>
            <span id="span9" onmouseout="CRateOut(9)" onmouseover="CRateOver(9)" onclick="CRateClick(9)" class="fa fa-star-o fa-3x"></span>
            <span id="span10" onmouseout="CRateOut(10)" onmouseover="CRateOver(10)" onclick="CRateClick(10)" class="fa fa-star-o fa-3x"></span><h5>10</h5>
            <br />
            @Html.ValidationMessageFor(model => model.Vl_voto, "", new { @class = "text-danger" })
        </div>
        <div>
            <input type="hidden" name="Vl_Voto" id="lblRating" value="">
        </div>

        <div class=" form-row justify-content-center text-center ">
            <div class="">
                <p class="fa-2x">Escolha o Setor no qual você foi atendido.</p>
                @Html.DropDownList("SetorId", null, htmlAttributes: new { @class = "fa-2x" })<br />
                @Html.ValidationMessageFor(model => model.SetorId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="justify-content-md-center">
            <div>
                <input type="submit" value="Salvar" onfocus="Detrator()" class="btn btn-success" />
            </div>

        </div>


        <!---- MODAL -->
        <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Pesquisa de Satisfação</h5>
                        <button type="button" class="close bg-danger" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    <div class="modal-body">
                        <div>
                            <br />
                            <p>Na sua opinião, o que pode ser melhorado?</p>
                            <div>
                                <label for="LblAtendente" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckAtendente" type="checkbox" value="A qualidade do atendente" /> A qualidade do atendente
                                </label>
                            </div>
                            <div>
                                <label for="LblServico" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckServico" type="checkbox" value="A qualidade do serviço" /> A qualidade do serviço
                                </label>
                            </div>
                            <div>
                                <label for="LblResServico" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckResServico" type="checkbox" value="A resolução do problema" /> A resolução do problema
                                </label>
                            </div>
                            <div>
                                <label for="LblTempo" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckTempo" type="checkbox" value=" O tempo de espera" /> O tempo de espera
                                </label>
                            </div>
                            <div>
                                <label for="LblInfra" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckInfra" type="checkbox" value="A qualidade da infraestrutura" /> A qualidade da infraestrutura
                                </label>
                            </div>
                            <div>
                                <label for="LblOutro" style="word-wrap:break-word">
                                    <input name="Justificativa_voto" id="CheckOutro" type="checkbox" value="Outro" /> Outro
                                </label>
                            </div>
                        </div>
                        <div class="center">
                            <p>Nós queremos te ouvir, deixe seu telefone e entraremos em contato. (OPCIONAL)</p>

                            @Html.EditorFor(model => model.Nr_telefone)
                            @Html.ValidationMessageFor(model => model.Nr_telefone, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="modal-footer align-content-center center">
                        <div class="col text-center">
                            <input value="Continuar" type="submit" class="btn btn-success">
                            @*<input value="Cancelar" type="button" class="btn btn-danger" data-dismiss="modal">*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

    <script type="text/javascript">

        function Detrator() {
            var rating = $("#lblRating").val();
            if (rating <= 6) {
                $("#exampleModalLong").modal()
                return false;
            }
            else {
                return true;
            }
        }

        function CRateOut(Rating) {
            for (var i = 1; i <= Rating; i++) {
                $("#span" + i).attr('class', 'fa fa-star-o fa-3x');
            }
        }

        function CRateOver(Rating) {
            for (var i = 1; i <= Rating; i++) {
                $("#span" + i).attr('class', 'fa fa-star fa-3x');
            }
        }

        function CRateClick(Rating) {
            $("#lblRating").val(Rating);
            for (var i = 1; i <= Rating; i++) {
                $("#span" + i).attr('class', 'fa fa-star fa-3x');
            }

            for (var i = Rating + 1; i <= 10; i++) {
                $("#span" + i).attr('class', 'fa fa-star-o fa-3x');
            }
        }

        function CRateSelected() {
            var rating = $("#lblRating").val();
            for (var i = 1; i <= rating; i++) {
                $("#span" + i).attr('class', 'fa fa-star fa-3x');
            }
        }

        $('#myModal').on('shown.bs.modal', function () {
            $('#myInput').trigger('focus')
        })

        $('input[type="checkbox"]').on('change', function () {
            $('input[type="checkbox"]').not(this).prop('checked', false);
        });
    </script>

</body>
</html>


